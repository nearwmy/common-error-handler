(function(n,e){typeof exports=="object"&&typeof module!="undefined"?e(exports):typeof define=="function"&&define.amd?define(["exports"],e):(n=typeof globalThis!="undefined"?globalThis:n||self,e(n.lib={}))})(this,function(n){"use strict";var A=Object.defineProperty;var N=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,S=Object.prototype.propertyIsEnumerable;var H=(n,e,r)=>e in n?A(n,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[e]=r,E=(n,e)=>{for(var r in e||(e={}))C.call(e,r)&&H(n,r,e[r]);if(N)for(var r of N(e))S.call(e,r)&&H(n,r,e[r]);return n};var s=(n,e,r)=>(H(n,typeof e!="symbol"?e+"":e,r),r);const e={NETWORK_ERROR:"Network Error",TIMEOUT_ABORTED:"ECONNABORTED",INVALID_TOKEN:"INVALID_TOKEN",INVALID_TOKEN_CODE:413},r={PERMISSION_DENIED:3,INVALID_AUTH:8,AUTH_EXPIRED:9},_={CONTENT_lOADED_FAILED:11003,PERMISSION_DENIED:11004,INTERNAL_ERROR:11009,ACCOUNT_DEACTIVATION:11010,AUTH_EXPIRED:11005,SENSITIVE_CONTENT:11008,TRAFFIC_EXCEEDED:22005,SERVER_ERROR:22006,TOO_FREQUENT:11006,REACHED_LIMIT:11007,FORMAT_ERROR:22222};var h=E(E(E({},e),r),_);class d extends Error{}s(d,"type","edam"),s(d,"code","");class I extends Error{}s(I,"type","grpc");class R extends Error{}s(R,"type","restful");var D={EdamError:d,GrpcError:I,RestfulError:R};const T=Symbol();let c=null;const u=a=>{if(a instanceof Error)throw Error;return a};class f{constructor(t){s(this,"configHandlers");s(this,"finalHandler",u);if(t!==T)throw new Error("can not create a ErrorHandler instance");this.configHandlers=new Map}static getInstance(){return c===null&&(c=new f(T)),c}registerHandlers(t){const i=Object.keys(t);for(let l=0;l<i.length;l++)this.configHandlers.set(i[l],t[i[l]])}registerFinalHandler(t){this.finalHandler=t}unregisterHandlers(t){for(let i=0;i++;i<t.length)this.configHandlers.delete(t[i])}unregisterFinalHandler(){this.finalHandler=u}getConfigHandlers(){return this.configHandlers}getFinalHandler(){return this.finalHandler}handler(t){if(t!=null){const i=O=>{try{this.finalHandler&&this.finalHandler(O)}catch(o){console.warn(`occur an error in finalHandler handler
`,o)}};let l=!1;Array.from(this.configHandlers).forEach(O=>{const o=O[1];try{o.condition(t)&&o.handler(t)}catch(g){i(g)}l=!0}),l||i(t)}}}n.RequestError=D,n.default=f,n.errorCodes=h,Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
